* [[gui.js]] - Описание возможностей встраиваемого в дерево элементов ui javascript кода 
* [[gui.action-lang]] - Описание концепции, под рабочим названием action_lang. Способа описания изменения ui,
на стороне клиента, без привлечения основного кода приложения. 
* [[gui.backend]] - Описание работы разных бекендов, их особенностей, способов использования

Сервис реализует простой набор виджетов для построения интерфейсов. В основу описания gui положено json описание дерева виджетов. Возможно как декларативное описание всего интерфейса в виде одного json документа, так и создание дерева виджетов с помощью вызова методов. Оба способа построения интерфеса можно комбинировать.
Все методы создания виджетов и работы с ними есть в файле интерфейса этого сервиса, поэтому простое их перечисление здесь не имеет смысла. Однако общие понятия всё таки приведу.
Каждый виджет - это объект, который который адресуется с помощью UUID. Этот UUID можно получить двумя способами:
*создать виджет с помощью метода, создающего виджет, который и вернёт нужный UUID 
*запросив UUID нужного виджета из существующего дерева виджетов. 

Второй способ необходим либо в том случае, когда временное хранение UUID виджетов в коде не имеет смысла(например очень большое дерево виджетов), так и в случае, когда дерево изначально было построено из json документа.
Прежде, чем покажем немного работающего кода(пусть и упрощённого псевдокода), надо разобраться с json описанием дерева, так как именно этот способ будет преимущественно использоваться, как наиболее удобный.
Простой пример:

```js
{
    "panel_root" : {
        "orientation" : "vertical",
        "child" : {
             "label_fig" : {
                "text" : "Фиг вам гады, мир не продаётся!"
            },
            "button_sell" : {
                "text" : "Продать всё сразу"
           }
        }
    }
}
```
Приведённый пример демонстрирует простое окошечко, которое описано с помощью panel_root. В котором расположено два элемента вертикально. Одна метка и одна кнопка под меткой:
    
    Фиг вам гады, мир не продаётся!
    +-----------------+
    |Продать всё сразу|
    +-----------------+

Ну и пожалуй сразу не будем мелочиться и рассмотрим комплексный пример:) В качестве примера можно взять какое-нибудь окно ввода какого-нибудь сферического мессенджера:)
```js
{
    "panel_window" : {
        "orientation" : "vertical",
        "child" : {
            "button_user" : {
                "text" : "дружище"
            },
            "panel_messages" : {
                "orientation" : "vertical",
                "child" : {
                    "label_msg1" : {
                        "text" : "пирожочег: Здорово лошара!"
                    },
                    "label_msg2" : {
                        "text" : "дружище: Как сам, почки ещё держатся?"
                    },
                    "label_msg3" : {
                       "text" : "пирожочег: конечно, они будут держаться вечность, я же мужик!"
                    },
                    "label_msg4" : {
                        "text" : "дружище: Хо *ТроллФейс"
                    },
                    "label_msg5" : {
                        "text" : "пирожочег: Пить будешь?"
                    },
                    "label_msg6" : {
                        "text" : "дружище: Конечно, на поминках по тебе, выпью пару стопарей друх"
                   },
               }
            },
            
            "panel_toolbox" : {
                "orientation" : "horizontal",
                "child" : {
                    "button_font" : {
                        "text" : "шрифт",
                    },

                    "button_smiles" : {
                        "text" : "жмуйлеге"
                    }
                } 
           },

            "entry_newmsg" : {
               "text" : "Введите сюда своё обдолбанное сообщение"
            }

        }  
    }
}
```
Вся вышенаписанная фигня превращается вот в такое окно:

    +-------+
    |дружище|
    +-------+
     пирожочег: Здорово лошара!
     дружище: Как сам, почки ещё держатся?
     пирожочег: конечно, они будут держаться вечность, я же мужик!
     дружище: Хо *ТроллФейс"
     пирожочег: Пить будешь?
     дружище: Конечно, на поминках по тебе, выпью пару стопарей друх
     +-----+ +--------+
     |шрифт| |шмуйлеге|
     +-----+ +---------
     +---------------------------------------+
     |Введите сюда своё обдолбанное сообщение|
     +---------------------------------------+

###Типы элементов ui и их свойтва:

Существуют следующие типы элементов и их свойства:

* panel
 Содержит свойства:

 orientation - vertical or horisontal

 child - объект, способный содержать любые другие элементы
 
* label

  text - string 

* button

  text - string

* entry 

  text - string

###Action_object объекты действия

Элементы этого типа имеют свой контейнер - `ao`. И _любой_ элемент интерфейса имеет этот контейнер в себе, в виде element.ao. Контейнер, это также элемент, поэтому он можежт быть добавлен в панельки, как и другие элементы.

Например: `panel1.ao`, `button.ao`, `label.ao` и тд

В контейнер `ao` помещаются `action_object`ы

Таким образом контейнер `ao` подобен контейнеру `panel` с той разницей, что может содержать _только_ элементы типа `action_object`. 

Пример использования:

```javascript
{
     "panel_window" : {
         "orientation" : "vertical",
         "child" : {
             "ao_tretya_figa" : { 
                                    "catch" : ['figa vipushena v otvet'],
                                    "code" : "local.ui.add('figushka', 'label', { 'text' : 'vot tebe i figushka, do igralsya malcheg'})"
             }
         },
         "on_mouse_move" : { 
                               "figa" : { 
                                             "throw" : ['figa vipushena'] 
                               } 
                           },
         "ao" : { 
                    "otvetnayafiga" : { 
                                          "catch" : ['figa vipushena'],
                                          "throw" : ['figa vipushena v otvet'] 
                                      } 
                }
     } 
}
```

Пример порождает событие по навадению мыши на панельку, затем порождается событие, как результат отлова первого события, а потом отлавливается второе и вызывается код, который создаёт на панельке метку.

Подробнее о структуре `action_object` смотрим [[gui.action-lang]]

### Сигналы
 Каждый элемент может иметь сигналы.
 Сигнал элемента `ui` может иметь одно из трёх состояний: 

* объект, содержащий action_object`ы, полностью аналогичен контейнеру ao 

* serviced - обычный обработчик на стороне того сервиса, который использует сервис gui для построения

* disabled - быть не активным

Сигнал может быть и не указан в описании элемента, в таком случае он считается `disabled`

Список сигналов одинаков для всех элементов, вот он:

* on_load
  При создании элемента с помощью create
* on_click
  клик:)
* on_dblclick
  двойной клик
* on_move
  движение элемента, испускается всякий раз при смещении. Вызывается каждые несколько пикселей, так часто, как это возможно на протяжении траектории движения.
* on_mouse_move
  движение мыши над элементом.  
* on_mouse_down
  нажатие клавиш мыши над элементом
* on_mouse_up
  отпускание клавиши мыши над элементом